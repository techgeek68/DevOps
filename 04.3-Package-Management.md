# 5. Package Management

Package management is essential for installing, updating, and maintaining software on Linux systems. This guide covers key tools, concepts, and commands for managing packages, dependencies, compiling from source, and managing services.

---

## 1. Package Managers by Distribution

  - **Debian/Ubuntu (and derivatives):** `apt`, `dpkg`
  - **Red Hat/Fedora/CentOS:** `dnf` (or `yum` for older systems), `rpm`
  - **Arch Linux/Manjaro:** `pacman`
  - **openSUSE:** `zypper`, `rpm`

*Each Linux distribution uses its own package manager, which handles installation, updates, and removal of software packages.*

---

## 2. Querying Packages:

Being able to search for packages is essential for discovering software, libraries, and tools available in your Linux distribution’s repositories.

**Search for Available Packages**

**Debian/Ubuntu:**
```sh
apt search <keyword>
```
*Examples:*
```sh
apt search apache
```
```sh
apt search database
```

**Red Hat/Fedora/CentOS:**
```sh
dnf search <keyword>
```
```sh
yum search <keyword>
```

*Examples:*
```sh
dnf search webserver
```
<img width="790" height="200" alt="Screenshot 2026-01-14 at 11 35 40 AM" src="https://github.com/user-attachments/assets/ece64e11-eda8-4e02-a84d-85da58328db2" />

```sh
dnf search apache
```
```sh
dnf search sql
```
```sh
dnf search *database*
```

**Arch Linux:**
```
pacman -Ss <keyword>
```

**openSUSE:**
```
zypper search <keyword>
```

*These commands help you find software packages available for installation in your distribution's repositories.*

---

### **View Package Information**:

To get detailed information about a package, including its version, description, dependencies, source, and more use the following commands for your distribution:

**Debian/Ubuntu:**
```sh
apt show <package>
```

*Example:*
```sh
apt show apache2
```

**Red Hat/Fedora/CentOS:**
```sh
dnf info <package>
yum info <package>
```

*Examples:*
```sh
dnf info gzip
```
```sh
dnf info tar
```
```sh
dnf info mariadb
```
```sh
dnf info httpd
```

<img width="1294" height="716" alt="Screenshot 2025-10-17 at 7 14 26 AM" src="https://github.com/user-attachments/assets/3defe167-c4b4-436c-8300-53f419c9e794" />


**Arch Linux:**
```
pacman -Si <package>    #Info about a package in the repo
```
```
pacman -Qi <package>    #Info about an installed package
```

**openSUSE:**
```
zypper info <package>
```

*Use these commands to get details about a package, such as version, description, and dependencies.*

---

### **List Installed Packages**:

Knowing which packages are installed on your system is important for troubleshooting, auditing, and verifying software availability.

**Debian/Ubuntu:**
```sh
dpkg -l | grep <package>
```
*Lists installed packages and filters for a specific package name.*


**Red Hat/Fedora/CentOS:**
```sh
dnf list installed
```
```sh
yum list installed
```
```sh
rpm -qa | grep <package>
```

*Examples:*
```sh
rpm -qa | grep tar
```
```sh
rpm -qa | grep httpd
```
*Lists all or specific installed packages.*
<img width="794" height="148" alt="Screenshot 2026-01-14 at 11 37 37 AM" src="https://github.com/user-attachments/assets/0eea2866-f093-4d65-a998-db9360f28f08" />


**Arch Linux:**
```
pacman -Q | grep <package>
```

**openSUSE:**
```
zypper search --installed | grep <package>
```

*List all installed packages or check if a specific package is installed.*

---

### **Find Which Package Owns a File**:

Sometimes you have a file on your system and want to know which package installed or provided it. Use the following commands for your distribution:

**Debian/Ubuntu:**
```sh
dpkg -S </path/to/file>
```

**Red Hat/Fedora/CentOS:**
```sh
rpm -qf </path/to/file>
```

*Examples:*
```sh
rpm -qf /usr/bin/tar
rpm -qf /etc/yum.repos.d
```

<img width="735" height="125" alt="Screenshot 2025-10-17 at 7 23 37 AM" src="https://github.com/user-attachments/assets/7111aa75-3abf-49b5-8321-c0c1d0def4aa" />

**Arch Linux:**
```
pacman -Qo </path/to/file>
```

**openSUSE:**
```
zypper wp </path/to/file>
```

*If you find a file on your system and want to know which package installed it, use these commands to identify the owning package. This is especially useful for troubleshooting or cleaning up orphaned files.*

---

## 3. Installing Packages:

Installing software packages is one of the most common tasks for Linux administrators. Each distribution provides high level and low level tools for package management.

### **From Repositories**

**Debian/Ubuntu (.deb packages):**

  **High Level Tool (`apt`):**
  
  Updates the package list (metadata), not the packages:
  ```sh
  sudo apt update
  ```

  Installs the specified package and resolves dependencies:
   ```sh
  sudo apt install <package>
  ```

  Upgrades all packages to the latest available versions:
  ```sh
  sudo apt upgrade
  ```

  Removes the package but leaves configuration files intact:
  ```sh
  sudo apt remove <package>
  ```
  
  Completely removes the package and its associated configuration files.
  ```sh
  sudo apt purge <package>
  ```
  
  Removes packages that were installed as dependencies but are no longer needed.
  ```sh
  sudo apt autoremove
  ```
  
*`apt` handles package installation, upgrades, and dependency resolution automatically.*

  **Low Level Tool (`dpkg`):**
  ```sh
  sudo dpkg -i <package.deb>
  ```
  
*`dpkg` installs .deb files directly but does not resolve dependencies; use `apt install -f` to fix broken dependencies.*

---

**Red Hat/Fedora/CentOS (.rpm packages):**

**High Level Tools (`dnf`, `yum`):**

Update all packages:
```sh
sudo dnf update
```

Install a package:
```sh
sudo dnf install <package>
```

Remove a package:
```sh
sudo dnf remove <package>
```

*Examples:*
```sh
sudo dnf -y install httpd
```
```sh
sudo dnf -y install mariadb
```
```sh
sudo dnf -y install git
```
>non interactive install with `-y`


**yum (older systems):**
```sh
sudo yum install <package>
```
```sh
sudo yum update
```


* `dnf` is the modern package manager for RHEL and Fedora. `yum` is still used on older systems.*


**Low Level Tool (`rpm`):**

Install an `.rpm` package file:
```sh
sudo rpm -ivh <package.rpm>
```

Remove a package:
```sh
sudo rpm -e <package>
```
*`rpm` installs and removes .rpm files directly, but does not resolve dependencies.*

---

**Arch Linux:**
```
sudo pacman -S <package>
```

*`pacman` installs packages and resolves dependencies for Arch Linux.*

---

**openSUSE:**
```
sudo zypper refresh
```
```
sudo zypper install <package>
```

*`zypper` is the command-line interface for managing packages in openSUSE.*

---

### **From Local Files**:

Sometimes you need to install packages that you have downloaded manually or built yourself, rather than from your distribution’s repositories. Use the following commands for your Linux distribution:

**Debian/Ubuntu:**
```sh
sudo dpkg -i <package.deb>
sudo apt install -f
```
- `dpkg -i` installs a `.deb` package file.
- `apt install -f` fixes and installs any missing dependencies.


**Red Hat/Fedora:**
```sh
sudo dnf install <package.rpm>
sudo rpm -i <package.rpm>
```
- `dnf install` handles dependencies automatically.
- `rpm -i` installs the `.rpm` file directly (does **not** resolve dependencies).


**Arch Linux:**
```
sudo pacman -U <package.pkg.tar.zst>
```
- Installs a local Arch package file.


**openSUSE:**
```
sudo zypper install <package.rpm>
```
- Installs a local `.rpm` file and resolves dependencies

*These commands install packages you’ve downloaded manually or built yourself. High level tools like `apt`, `dnf`, and `zypper` are preferred as they handle dependencies automatically. Low level tools like `dpkg` and `rpm` may require you to resolve dependencies separately.*

---

## 4. Removing Packages:

Removing unnecessary or unused software helps keep your system clean, secure, and efficient. Each distribution provides commands to remove packages, and some of these commands also remove associated configuration files.

**Debian/Ubuntu:**
```sh
sudo dpkg -r <package>         # Remove package (leaves config files)
```
```sh
sudo dpkg -P <package>         # Purge package (removes config files)
```
```sh
sudo apt remove <package>      # Remove package (leaves config files)
```
```sh
sudo apt purge <package>       # Remove package and config files
```

**Red Hat/Fedora/CentOS:**
```sh
sudo dnf remove <package>      # Remove package
```
```sh
sudo yum remove <package>      # Remove package (older systems)
```

*Examples:*
```sh
sudo dnf remove nginx
```
```sh
sudo dnf -y remove httpd
```
```sh
sudo dnf -y remove mariadb
```
```sh
sudo dnf -y remove git
```
*Note: `dnf`/`yum` typically remove most files, but config files in /etc may need manual deletion if modified.*


**Arch Linux:**
```sh
sudo pacman -R <package>       # Remove package (keep config files)
sudo pacman -Rns <package>     # Remove package and config files and unused deps
```

**openSUSE:**
```sh
sudo zypper remove <package>   # Remove package
```

*These commands remove packages from your system. Use purge or clean options to remove configuration files as well.*

---

### **Clean Up Unused Dependencies**:

As you install and remove packages, unused dependencies (orphaned libraries) can accumulate on your system. Cleaning them up helps free disk space and keeps your system tidy.

**Debian/Ubuntu:**
```sh
sudo apt autoremove
```
*Automatically removes packages that were installed as dependencies and are no longer needed.*


**Red Hat/Fedora/CentOS:**
```sh
sudo dnf autoremove
```
*Removes unneeded packages that were installed as dependencies.*


**Arch Linux:**
```sh
sudo pacman -Rns $(pacman -Qdtq)
```
*Finds and removes unused orphaned packages and their configuration files.*


**openSUSE:**
```sh
sudo zypper rm --clean-deps <package>
```
*Removes the specified package along with dependencies that are no longer needed.*

*Unused dependencies can accumulate over time. These commands remove orphaned libraries and packages, helping to maintain a clean and efficient system.*

---

## 5. Updating Packages

Keeping your system updated ensures you have the latest security patches, bug fixes, and features.

**Debian/Ubuntu:**
```sh
sudo apt update && sudo apt upgrade
sudo apt full-upgrade
```
- `apt update` refreshes the package list.
- `apt upgrade` installs available updates.
- `apt full-upgrade` upgrades with dependency changes, possibly removing/installing packages as needed.


**Red Hat/Fedora/CentOS:**
```sh
sudo dnf upgrade
```
- Upgrades all installed packages to their latest versions.


**Arch Linux:**
```sh
sudo pacman -Syu
```
- Synchronizes package databases and updates all packages.

**openSUSE:**
```sh
sudo zypper update
```
- Updates all installed packages.

*Regularly updating packages helps keep your system secure and stable by providing the latest software versions and security patches.*

---

## 6. Understanding Package Dependencies

Package dependencies are other software packages (libraries, tools, or programs) that a specific package requires to function properly.

**Automatic Resolution:**
Modern package managers automatically install required dependencies for you.

```sh
sudo dnf install <package>
sudo apt install <package>
```
```sh
sudo pacman -S <package>
sudo zypper install <package>
```

*When you install a package using high-level tools like `dnf`, `apt`, `pacman`, or `zypper`, the package manager checks for required dependencies and installs them automatically.*

---

### **Manual Resolution**

If you install a package using a low level tool (such as `dpkg` or `rpm`) and dependencies are missing, you can resolve them manually:

```sh
sudo apt install -f
```
```sh
sudo dnf install <package.rpm>
```

- `apt install -f` attempts to fix and install any missing dependencies after using `dpkg`.
- `dnf install <package.rpm>` will attempt to resolve and install dependencies for a local `.rpm` file.

*Use these commands to fix broken or missing dependencies when using low-level installation tools.*

---

## 7. Installing Software from Source

When pre built packages are unavailable, or you need a specific version, you can compile or install software from source. This process usually involves downloading the source or pre built binaries, extracting them, and moving them to the appropriate system directories.


**Example: Download and Install Node.js 20.x on CentOS 9/RHEL 9**

**Check your system architecture:**
`uname -m`

**Download the pre built binary archive**
- For x86:
`wget https://nodejs.org/dist/v20.11.1/node-v20.11.1-linux-x64.tar.xz`

- For arm64
`wget https://nodejs.org/dist/v20.11.1/node-v20.11.1-linux-arm64.tar.xz`

**List files to confirm download**
`ls`

<img width="1281" height="264" alt="Screenshot 2025-10-17 at 9 09 58 AM" src="https://github.com/user-attachments/assets/2c10ec66-5e76-4894-8906-70d0d3feef1a" />

```sh

tar -xvf node-v20.11.1-linux-x64.tar.xz                       # Extract the archive

or

tar -xvf node-v20.11.1-linux-x64.tar.xz                      # Extract the archive

cd node-v20.11.1-linux-x64                                   # Enter the extracted directory

sudo cp -r bin include lib share /usr/local/                 # Copy binaries and libraries to /usr/local (system wide installation)


node -v                                                      # Verify installation
npm -v                                                       # Verify installation
```

<img width="1106" height="178" alt="Screenshot 2025-10-17 at 9 12 30 AM" src="https://github.com/user-attachments/assets/3f1b87d9-ba5a-4811-b9fb-bd66f1324f12" />


*Download the software, extract it, move the binaries and libraries to a system path, and verify the installation. This method is useful when the required package or version is not available in standard repositories.*

---

## 8. Managing Services

Managing services is essential for running applications and ensuring their availability on a Linux system.

**Managing Services with systemctl and systemd**

**Start a service:**
```
sudo systemctl start service_name
```

**Stop a service:**
```
sudo systemctl stop service_name
```

**Restart a service:**
```
sudo systemctl restart service_name
```

**Reload a service (apply config changes):**
```
sudo systemctl reload service_name
```

**Check status:**
```
systemctl status service_name
```

**Enable service at boot:**
```
sudo systemctl enable service_name
```

**Disable service from boot:**
```
sudo systemctl disable service_name
```

>restart: Stops and starts the service completely — use for major changes or if it’s stuck.
>reload: Reloads configuration without stopping — use for minor config updates with no downtime.

*`systemctl` controls and manages services (daemons) on systems running the `systemd` init system. These commands help you control application availability and ensure services start or stop as needed.*


**Example: Managing the `httpd` (Apache) Service**

- **Check the status of httpd:**
  ```sh
  systemctl status httpd
  ```

- **Start the httpd service:**
  ```sh
  sudo systemctl start httpd
  ```

- **Enable httpd to start at boot:**
  ```sh
  sudo systemctl enable httpd
  ```
  
- **Check status again after changes:**
  ```sh
  systemctl status httpd
  ```

- **Disable httpd from starting at boot:**
  ```sh
  sudo systemctl disable httpd
  ```
  
<img width="1067" height="799" alt="Screenshot 2025-10-17 at 9 20 35 AM" src="https://github.com/user-attachments/assets/58f0e1c3-0bfb-43e0-8b1d-f15dac5fb4c9" />

  
---

### **Understanding systemd Units**

Systemd uses unit files to define how services and other system resources are started, stopped, and managed.

---

**List system wide services:**
```sh
cd /usr/lib/systemd/system/
```
```sh
ls
```
*Contains unit files provided by installed packages and system services.*

---

#### **List user specific services:**
```sh
cd /etc/systemd/system/
```
```sh
ls
```
*Contains unit files created or customized by the system administrator.*

<img width="1284" height="178" alt="Screenshot 2025-10-17 at 9 24 32 AM" src="https://github.com/user-attachments/assets/48c5a96d-c5a2-45d8-a2cb-3945b8a2664a" />

---

#### **Reload after editing unit files:**
```sh
sudo systemctl daemon-reload
```
*Reloads systemd manager configuration to recognize changes to unit files.*

---

#### **View dependencies:**
```sh
systemctl list-dependencies service_name
```

*Examples:*
```sh
systemctl list-dependencies tar
systemctl list-dependencies gzip
systemctl list-dependencies httpd
systemctl list-dependencies nginx
```
*Shows all units that a service depends on, directly or indirectly.*

*Unit files define how services are started and managed. Use these commands to inspect, edit, and reload unit configurations, ensuring changes are recognized and dependencies are understood.*

---

### **Troubleshooting Services**

Efficient troubleshooting is essential for maintaining reliable and available services on your system. Use these commands to monitor, diagnose, and manage services:



**View logs for a service:**
```sh
journalctl -u service_name
```

Example:
```sh
journalctl -u httpd
```

**Follow real-time logs:**
```sh
journalctl -u service_name -f
```

Example:
```sh
journalctl -u httpd -f
```

**Filter logs by time:**
```sh
journalctl --since "2024-01-01 00:00:00"
journalctl --since "1 hour ago"
journalctl --since "1 hour ago" | grep httpd
```

**Show errors only:**
```sh
journalctl -p err -u service_name
```
Example:
```sh
journalctl -p err -u httpd
```

**Check service status for errors:**
```sh
systemctl status service_name
```

Example:
```sh
systemctl status httpd
```

**Validate unit file syntax:**
```sh
systemd-analyze verify service_name
```

Example:
```sh
systemd-analyze verify httpd.service
```

**Check if service is enabled:**
```sh
systemctl is-enabled service_name
```

Example:
```sh
systemctl is-enabled nginx
```

**List listening ports:**
```sh
netstat -tnl
```

Examples:
```sh
netstat -tnl | grep 80
netstat -tnl | grep 22
```


**Stop and disable a service:**

Examples:
```sh
sudo systemctl stop httpd
sudo systemctl disable httpd
```

**Check service specific logs:**
```sh
journalctl -u httpd --since today
```

*Use these tools to monitor, troubleshoot, and manage the lifecycle of system services. Checking logs, service status, and network ports can help identify and resolve issues quickly.*

---
